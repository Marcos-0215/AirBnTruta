<!DOCTYPE html>
<html lang="pt" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />    
    <title>Hospedagens Disponíveis</title>

    <div th:insert="~{frags/misc :: bootstrap}"></div>
  </head>

  <body class="bg-light">
    
    <div th:insert="~{frags/menu :: fugitivo}"></div>

    <div class="container mt-4">

      <h2 class="mb-4 text-center">Hospedagens Disponíveis</h2>

      <!-- Mensagem quando não há hospedagens -->
      <div 
        th:if="${#lists.isEmpty(hospedagens)}" 
        class="alert alert-warning text-center"
      >
        Nenhuma hospedagem disponível no momento.
      </div>

      <!-- Formulário do Filtro -->
      <form method="get" th:action="@{/fugitivo}" class="row g-3 mb-4">

        <div class="col-md-5">
          <input
            type="text"
            name="local"
            class="form-control"
            placeholder="Localidade"
            th:value="${param.local}"
          />
        </div>

        <div class="col-md-4">
          <input
            type="number"
            step="0.01"
            name="precoMax"
            class="form-control"
            placeholder="Preço máximo"
            th:value="${param.precoMax}"
          />
        </div>

        <div class="col-md-3 d-grid">
          <button class="btn btn-primary">
            Filtrar
          </button>
        </div>

      </form>


      <!-- Lista de hospedagens -->
      <div class="row">
        <div
          class="col-md-4 mb-4"
          th:each="hospedagem : ${hospedagens}"
          th:object="${hospedagem}"
        >
          <div class="card h-100 shadow-sm">
            <div class="card-body d-flex flex-column">
              
              <h5 class="card-title" th:text="*{descricaoCurta}"></h5>
              <h6 class="card-subtitle mb-2 text-muted">
                Informações da Diária
              </h6>

              <p class="card-text" th:text="*{localizacao}"></p>
              <p class="card-text fw-bold" 
                 th:text="'Valor da diária: R$ ' + *{diaria}">
              </p>

              <p class="card-text text-truncate" 
                 th:text="*{descricaoLonga}">
              </p>

              <a
                th:href="@{/hospedagem/view/{id}(id=*{codigo})}"
                class="btn btn-info mt-auto"
              >
                Ver detalhes
              </a>

            </div>
          </div>
        </div>
      </div>

    </div>
  </body>
</html>
